# שאלות ביקורת על האיכות והדיוק של המערכת

השתמש בשאלות הללו כדי לבחון אם המודל מיישם נכון את מנגנון ה-RAG, ההנחיות המשפטיות והזרמת התשובות בעברית בלבד. כל שאלה מתייחסת ישירות למימוש בקוד.

1. כיצד ניתן לוודא שהמודל מחזיר תמיד אירוע `final` נקי לאחר סיום ההזרמה, בהתאם ללוגיקה ב-`LegalRAGService.stream_answer`?
2. מה קורה אם מסד הוקטורים אינו קיים בנתיב `vectorstore` בעת יצירת `LegalRAGService`, והאם נדרש טיפול שונה?
3. האם התנאים ב-`_is_general_question` מספיקים כדי לזהות שאילתות כלליות, או שכדאי להוסיף מילות מפתח נוספות?
4. כיצד משפיע משקל הביגרמים לעומת המילים הבודדות בשיטת הניקוד ב-`retrieve`, והאם הוא צריך כיוונון?
5. האם סף הסינון `score >= top_score * 0.6` מוודא שנשארים רק מסמכים רלוונטיים, או שכדאי להעלות/להוריד אותו?
6. האם יש צורך להגביל את אורך השאלה או התוכן לפני שליחתם למודל השיחה כדי למנוע חריגה ממגבלות הקשר?
7. כיצד ניתן להרחיב את `build_context_and_citations` כך שייצר קישורים ישירים למסמכים גם כאשר הקובץ אינו קיים מקומית?
8. האם רשימת מילות העצירה כוללת את כל הווריאנטים הרלוונטיים בעברית, או שיש להוסיף צורות נוספות (למשל עם תחיליות שונות)?
9. כיצד ניתן לוודא שהמודל לא יחזור על תשובותיו, מעבר לסינון ב-`_clean_answer`?
10. האם יש צורך להחזיר מידע נוסף ב-`citations` (כגון מספרי עמודים) כדי לשפר את ההכוונה למשתמש?
11. כיצד ניתן לכתוב בדיקות יחידה ל-`_clean_answer` כדי לוודא שהיא מסירה טקסט אנגלי וקטעי פתיחה לא רצויים?
12. האם כדאי להוסיף לוגיקת fallback שתענה תשובה סטטית כאשר אין חיבור למודל (לדוגמה באולמה או OpenAI)?
13. האם שיטת הדירוג מביאה בחשבון טקסטים הפוכים/משובשים במסמכי PDF כפי שמצוין בהנחיות המודל, ואם לא כיצד לשפר זאת?
14. כיצד ניתן להוסיף מדדי ניטור (logs/metrics) לזרימת ה-NDJSON כדי לזהות תקלות בזמן אמת?
15. האם רצוי להוסיף אפשרות לבחור דגם שונה של Ollama או OpenAI דרך ה-UI, מעבר לשמות ברירת המחדל?
16. כיצד שינוי פרמטרי הטמפרטורה וההקשר ב-`OllamaChatModel` ו-`OpenAIChatModel` עשוי להשפיע על אחידות התשובות בעברית?
17. האם כדאי להגביל את מספר ה-tokenים המוחזרים בזרימה כדי למנוע תשובות ארוכות מדי, ואם כן כיצד ליישם זאת?
18. כיצד הממשק הקדמי אמור להתנהג אם אירוע `final` כולל טקסט קצר יותר מהזרם המקורי – האם יש צורך להציג אינדיקציה לכך שהטקסט נוקה?
19. האם כדאי להוסיף טיפול בשגיאות מפורט יותר ב-`chat_endpoint` כדי להחזיר קודי מצב נפרדים עבור כשלים במודל לעומת כשלים בוקטור סטור?
20. כיצד ניתן לבדוק אוטומטית שהקישורים להורדת קבצים (`/api/files/{filename}`) מתאימים לשמות המופיעים בציטוטים המוחזרים?
